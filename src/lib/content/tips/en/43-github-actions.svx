---
id: 43
title: "GitHub Actions"
section: advanced
summary: "Run /install-github-app to set up Claude for your repos."
isFree: false
---

[Claude Code GitHub Actions](https://github.com/anthropics/claude-code-action) turns Claude into a virtual teammate. Tag `@claude` in any issue or PR, and it analyzes context, writes code, and creates pull requests while you sleep.

## Quick Setup

```bash
claude
/install-github-app
```

This command walks you through installing the [Claude GitHub App](https://github.com/apps/claude), adding your `ANTHROPIC_API_KEY` to repository secrets, and creating the workflow file in `.github/workflows/`.

**Requirements:** Repository admin access. Only available for direct Anthropic API users. For AWS Bedrock or Google Vertex AI, you'll need manual setup.

## Manual Setup

**Step 1:** Install the [Claude GitHub App](https://github.com/apps/claude)

It requests Contents, Issues, and Pull Requests permissions (read & write).

**Step 2:** Add `ANTHROPIC_API_KEY` to repository secrets

**Step 3:** Create `.github/workflows/claude.yml`:

```yaml
name: Claude Code
on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]
  issues:
    types: [opened, assigned]

permissions:
  contents: write
  pull-requests: write
  issues: write

jobs:
  claude:
    runs-on: ubuntu-latest
    if: |
      github.actor != 'claude[bot]' &&
      contains(github.event.comment.body, '@claude')
    steps:
      - uses: actions/checkout@v4
      - uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
```

The `github.actor != 'claude[bot]'` condition prevents Claude from triggering itself.

## What It Does

Claude auto-detects what you want based on context. Mention `@claude` and ask a question, it answers. Assign an issue, it implements. Request a review, it analyzes the diff and posts inline comments.

It follows your `CLAUDE.md` guidelines, updates visual checkboxes as it works, and can output structured JSON for downstream automation.

## Workflow Events

**Respond to @claude mentions:**

```yaml
on:
  issue_comment:
    types: [created]
  pull_request_review_comment:
    types: [created]
```

**Auto-review every PR:**

```yaml
on:
  pull_request:
    types: [opened, synchronize]
```

**Scheduled tasks (daily reports, maintenance):**

```yaml
on:
  schedule:
    - cron: "0 9 * * *"
```

## Using @claude Mentions

Tag Claude in any issue or PR comment:

```
@claude implement this feature based on the issue description
@claude how should I implement user authentication for this endpoint?
@claude fix the TypeError in the user dashboard component
@claude review this PR for security issues
```

Claude analyzes the context, writes code, and creates PRs. It respects your `CLAUDE.md` guidelines.

## Automatic PR Reviews

```yaml
name: Code Review
on:
  pull_request:
    types: [opened, synchronize]

jobs:
  review:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: anthropics/claude-code-action@v1
        with:
          anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
          prompt: "/review"
          claude_args: "--max-turns 5"
```

This provides AI code review on every PR. Claude posts inline comments with concerns and fix recommendations.

## Security Reviews

Claude scans for SQL injection, XSS, authentication flaws, insecure data handling, SSRF, and dependency issues.

[Anthropic's own team caught real vulnerabilities](https://claude.com/blog/automate-security-reviews-with-claude-code) before PRs merged: a DNS rebinding vulnerability enabling remote code execution in a local HTTP server, and an SSRF attack in a credential proxy system.

For security-focused reviews:

```yaml
prompt: "Review this PR for security vulnerabilities following OWASP guidelines"
```

## Authentication Options

**Direct Anthropic API** (default):

```yaml
anthropic_api_key: ${{ secrets.ANTHROPIC_API_KEY }}
```

**AWS Bedrock:**

```yaml
- uses: aws-actions/configure-aws-credentials@v4
  with:
    role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}
    aws-region: us-west-2
- uses: anthropics/claude-code-action@v1
  with:
    use_bedrock: "true"
    claude_args: "--model us.anthropic.claude-sonnet-4-5-20250929-v1:0"
```

**Google Vertex AI:**

```yaml
- uses: google-github-actions/auth@v2
  with:
    workload_identity_provider: ${{ secrets.GCP_WORKLOAD_IDENTITY_PROVIDER }}
    service_account: ${{ secrets.GCP_SERVICE_ACCOUNT }}
- uses: anthropics/claude-code-action@v1
  with:
    use_vertex: "true"
    claude_args: "--model claude-sonnet-4-5@20250929"
  env:
    ANTHROPIC_VERTEX_PROJECT_ID: ${{ steps.auth.outputs.project_id }}
    CLOUD_ML_REGION: us-east5
```

For cloud providers, add `id-token: write` to permissions.

## MCP Server Integration

Add custom MCP servers via `claude_args`:

```yaml
claude_args: |
  --mcp-config '{"mcpServers": {"sequential-thinking": {"command": "npx", "args": ["-y", "@modelcontextprotocol/server-sequential-thinking"]}}}'
  --allowedTools mcp__sequential-thinking__sequentialthinking
```

If your repo has `.mcp.json` at the root, Claude detects it automatically.

## Cost Optimization

Each interaction consumes API tokens. Control costs with:

**Limit iterations:**

```yaml
claude_args: "--max-turns 5"
```

**Use cheaper models for simple tasks:**

```yaml
claude_args: "--model claude-haiku-4-5-20251001"
```

**Set workflow timeouts:**

```yaml
jobs:
  claude:
    timeout-minutes: 10
```

**Use concurrency controls:**

```yaml
concurrency:
  group: claude-${{ github.ref }}
  cancel-in-progress: true
```

## Best Practices

**Security:**

- Never hardcode API keys. Always use GitHub Secrets.
- Grant least-privilege permissions (`contents: read` if not pushing commits).
- Review Claude's suggestions before merging.
- Use Workload Identity Federation for cloud providers instead of static keys.
- **[The action is not hardened against prompt injection](https://github.com/anthropics/claude-code-action/blob/main/docs/security.md)**. Hidden instructions in HTML comments, invisible characters, or markdown alt text can manipulate Claude. Only run on trusted PRs from known contributors.

**Repository Setup:**

- Create `CLAUDE.md` with your coding standards.
- Keep branch protection and CODEOWNERS active.
- Require human approval for merges.

**Workflow Design:**

- Use specific `@claude` commands to reduce API calls.
- Set appropriate `--max-turns` to prevent runaway iterations.
- Add workflow-level timeouts.
- Prevent self-triggering with the `github.actor != 'claude[bot]'` check.

## Common Pitfalls

**Missing permissions:** If you're using Bedrock or Vertex AI with OIDC authentication, you need `id-token: write` in your permissions block.

**Bot triggering itself:** Without the `github.actor != 'claude[bot]'` condition, Claude can respond to its own comments and loop until you hit your API limit.

**Runaway costs:** Each turn consumes tokens. Without `--max-turns` and workflow timeouts, a confused Claude can burn through your budget fast.

**MCP tools not loading:** If you've configured MCP servers via `--mcp-config`, the tools won't work unless you explicitly add them to `--allowedTools`.
