---
id: 7
title: "Auto-Approve Safe Actions"
section: safety
summary: "Speed up your workflow by auto-approving low-risk actions like reads and searches."
isFree: false
---

Claude asks permission for every action by default. This kills momentum. Security researchers call it "approval fatigue" - a psychological state where users stop evaluating individual permissions and start clicking through them automatically. Anthropic found that sandboxing alone reduces permission prompts by 84%. But even without sandboxing, you can dramatically speed up your workflow by auto-approving genuinely safe operations.

## The Approval Fatigue Problem

Picture this: You ask Claude to refactor a component. You switch to check email, grab coffee, and return to find Claude sitting idle, waiting to ask if it can read the exact file you told it to analyze. This happens dozens of times daily with default settings.

The constant interruption does more than annoy you - it trains you to click "approve" without looking. That's when accidents happen. The solution is not to approve everything, but to strategically pre-approve the operations that genuinely cannot cause harm.

## How Claude Code Permissions Work

Claude Code uses a tiered permission system with three rule types:

- **Allow**: Automatically approves matching operations without prompts
- **Deny**: Completely blocks operations; always overrides allow rules
- **Ask**: Forces confirmation prompts for specific actions

When Claude asks for permission, you can select "Always allow" to add the action to your allowlist. This creates entries in `.claude/settings.local.json`:

```json
{
  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "WebSearch",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:developer.mozilla.org)"
    ]
  }
}
```

## Configuration File Hierarchy

Settings are applied in this order (highest to lowest priority):

1. **Enterprise policies** (`managed-settings.json`) - Cannot be overridden
2. **Command line arguments** - Temporary session overrides
3. **Local project settings** (`.claude/settings.local.json`) - Personal, git-ignored
4. **Shared project settings** (`.claude/settings.json`) - Team-shared, version controlled
5. **User settings** (`~/.claude/settings.json`) - Global defaults

Local settings are automatically gitignored, making them perfect for personal preferences and experimentation without affecting your team.

## Safe to Auto-Approve

These operations are read-only and cannot modify your system:

### Read Operations

- `Read` - File reading poses no risk to your system (assuming you've denied sensitive files like `.env`)
- `Glob` - Pattern matching to find files by name
- `Grep` - Searching file contents for patterns
- `LS` - Listing directory contents

Claude Code's Explore subagent operates in strict read-only mode using only these tools. If it's safe enough for autonomous exploration, it's safe for auto-approval.

### Web Operations

- `WebSearch` - Searching the web is read-only; returns links without fetching content
- `WebFetch(domain:trusted-site.com)` - Fetching from specific documentation sites

For WebFetch, scope to specific trusted domains:

```json
{
  "permissions": {
    "allow": [
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:developer.mozilla.org)",
      "WebFetch(domain:react.dev)",
      "WebFetch(domain:svelte.dev)"
    ]
  }
}
```

Note: `WebFetch(domain:example.com)` matches `https://example.com/` but not `www.example.com`. Add both if needed.

### Read-Only Bash Commands

Some bash commands are inherently safe because they only read information:

```json
{
  "permissions": {
    "allow": [
      "Bash(git status)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(pwd)",
      "Bash(echo:*)",
      "Bash(date)",
      "Bash(which:*)"
    ]
  }
}
```

Bash permissions use prefix matching, not regex. `Bash(git diff:*)` matches `git diff`, `git diff HEAD`, etc.

## Never Auto-Approve

### Bash Commands (Most of Them)

The `Bash` tool can execute anything with your full user permissions. Even seemingly innocent commands can be weaponized through prompt injection. A single auto-approved `curl` or `wget` can exfiltrate your credentials. See Tip 6 for the full risk breakdown.

### Write Operations

- `Write` - Creates or overwrites entire files without review
- `Edit` - Makes targeted edits to existing files
- `MultiEdit` - Batch edits across multiple files
- `NotebookEdit` - Modifies Jupyter notebooks

These tools modify your codebase. Always review the diff before approving.

### MCP Tools

MCP (Model Context Protocol) servers give Claude access to external tools and services. Only explicitly enable MCP servers you trust and understand. If you don't know what an MCP server does, don't enable it.

## Achieving Hands-Off Agentic Workflows

With safe operations pre-approved, Claude researches, reads, and searches without stopping to ask. You only intervene for actual changes. This transforms development from constant approval clicking to reviewing meaningful decisions.

### The Three Permission Modes

Press `Shift+Tab` (Mac) or `Alt+M` (Windows) to cycle through modes:

1. **Normal mode** - Standard permission prompts for all operations
2. **Auto-accept edits** - Auto-approves file modifications; still prompts for bash
3. **Plan mode** - Read-only research mode; blocks all modifications

For maximum velocity on a well-defined task, use auto-accept mode. For exploring unfamiliar code, use plan mode. For everything else, use normal mode with strategic pre-approvals.

### Example: Research Workflow

With read operations pre-approved, you can tell Claude:

> "Research how authentication works in this codebase. Read all relevant files, search for patterns, trace the flow from login to session creation."

Claude will autonomously read dozens of files, grep for patterns, and explore the codebase without a single permission prompt. When it's ready to propose changes, only then do you review.

## Advanced: Custom Approval Logic with Hooks

For fine-grained control, use `PreToolUse` hooks to implement custom approval logic:

```json
{
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "./validate-bash-command.sh"
          }
        ]
      }
    ]
  }
}
```

Your script receives the full tool call context as JSON and can:
- Exit 0 to allow the command
- Exit 2 to block it
- Output JSON with `"decision": "allow"` or `"decision": "deny"`

This lets you build custom security firewalls. For example, auto-approve `npm run` but block any command containing `rm` or `curl`.

## The Balance: Speed vs. Safety

The goal is not to approve everything. It's to approve the operations that genuinely cannot cause harm, so you can focus your attention on the ones that can.

A well-configured permission setup:
- Pre-approves all read operations
- Pre-approves web fetches from trusted documentation sites
- Blocks access to sensitive files (`.env`, `secrets/`)
- Requires review for all file modifications
- Requires review for all bash commands except known-safe ones

This gives you the speed of agentic workflows with the safety of human oversight where it matters.

## Quick Setup

Add this to your `~/.claude/settings.json` for a balanced starting point:

```json
{
  "permissions": {
    "allow": [
      "Read",
      "Glob",
      "Grep",
      "WebSearch",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:developer.mozilla.org)",
      "Bash(git status)",
      "Bash(git diff:*)",
      "Bash(git log:*)",
      "Bash(npm run lint)",
      "Bash(npm run test:*)"
    ],
    "deny": [
      "Read(./.env)",
      "Read(./.env.*)",
      "Read(./secrets/**)",
      "Bash(curl:*)",
      "Bash(wget:*)",
      "Bash(rm:*)",
      "Bash(sudo:*)"
    ]
  }
}
```

Then use `/permissions` in Claude Code to review and refine as you work. The interactive UI makes it easy to add or remove tools from your allowlist dynamically.
