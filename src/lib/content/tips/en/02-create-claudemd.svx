
CLAUDE.md is Claude Code's constitution. Put it at project root. Every session starts with this file loaded into context, so you never re-explain your project's basics.

## The Framework: WHAT / WHY / HOW

Structure your file around three dimensions:

- **WHAT**: Tech stack, project structure, key files. Give Claude a map. In monorepos, identify apps, shared packages, and their purposes.
- **WHY**: Purpose of components, architectural decisions. Help Claude understand intent, not just structure.
- **HOW**: Build commands, test procedures, verification steps. Use bun instead of npm? Say so here.

## What to Document

### Essential

- **Build commands**: `npm run dev`, `npm run build`, `npm test`
- **Core files**: Key utilities, entry points, and their purposes
- **Code style**: Patterns to follow, patterns to avoid

### Important

- **Testing instructions**: Which tests to run, how to verify changes
- **Repository etiquette**: Branch naming, commit message style, merge vs rebase
- **Developer environment**: Required tools, versions, setup steps
- **Project quirks**: Unexpected behaviors, known issues, workarounds

### Critical Pitfalls to Prevent

- Using outdated library versions
- Adding unnecessary fallbacks or error handling
- Not thinking holistically (fixing one thing, breaking another)
- Not reading files before modifying them
- Creating new utilities when similar ones exist

## Keep It Short: The 150-200 Threshold

[Research on LLM instruction following](https://arxiv.org/html/2507.11538v1) shows models begin to struggle around 150-200 instructions. Beyond this, they start ignoring later instructions in favor of earlier ones. At 300+ instructions, performance degrades uniformly.

Claude Code's system prompt already consumes significant capacity. Your CLAUDE.md competes for attention. The more instructions you add, the less reliably any single one gets followed.

**The catch**: Claude Code [wraps CLAUDE.md with a system reminder](https://github.com/anthropics/claude-code/issues/7571) stating this content "may or may not be relevant to your task." The more task-specific content you include, the more likely Claude ignores everything.

Keep your root file under 200 lines. Some teams stay under 60 lines. Only include universally applicable instructions.

## Make Instructions Stick

**Use emphasis markers** for rules that matter. [Anthropic's engineering team](https://www.anthropic.com/engineering/claude-code-best-practices) uses the [prompt improver](https://claude.com/blog/prompt-improver) and adds markers like "IMPORTANT", "YOU MUST", "NEVER", "ALWAYS" to boost adherence.

```markdown
# Rules
- IMPORTANT: Always run tests before committing
- YOU MUST read existing implementations before creating new ones
- NEVER commit .env files
```

**Test that Claude follows your rules**. A common mistake is adding content without verifying it works. If Claude ignores an instruction repeatedly, reword it or move it higher in the file.

## Structure for Maintainability

- **Prefer pointers over copies**: Use `file:line` references instead of code snippets. Snippets become outdated quickly.
- **Provide alternatives**: "Use Y instead of X" works better than just "Never use X"
- **Start with guardrails, not manuals**: Document based on observed errors, not comprehensive coverage

## What NOT to Put Here

- **Linting rules**: Never send an LLM to do a linter's job. Use hooks instead (see Tip 40).
- **Task-specific guidance**: Database schema details distract when Claude works on unrelated tasks
- **Huge documentation embeds**: Don't dump entire files. Instead, tell Claude when to read docs: "For authentication issues, see docs/auth.md first"

## Import Files with @ Syntax

CLAUDE.md can import other files using `@path/to/file` syntax:

```markdown
# Project Overview
See @README for project summary.
See @package.json for available commands.

# Guidelines
- API patterns: @docs/api-conventions.md
- Personal overrides: @~/.claude/my-preferences.md
```

Imports work recursively up to 5 levels deep. This keeps your root file lean while making detailed docs accessible when needed. Home directory imports (`@~/...`) let team members add personal preferences without touching version control.

## Quick Setup

**Generate a starter file:**

```bash
/init
```

This scans your project and creates an initial CLAUDE.md. Treat it as a starting point, not a finished product. Review and refine based on how you actually work.

**Add instructions during sessions:**

Type `#` followed by any instruction to save it to memory. Claude prompts you to choose project-level or user-level storage:

```
# Always use TypeScript strict mode
# Prefer functional components over class components
```

Over a few weeks, your CLAUDE.md becomes a living document of lessons learned.

**Use `/memory`** to see what files are currently loaded or to open them in your editor.

## Placement

Put `CLAUDE.md` at project root for team-shared instructions. Use `CLAUDE.local.md` (add to .gitignore) for personal preferences. See Tip 29 for hierarchical strategies across directories and the `.claude/rules/` folder for modular organization.

## Example Structure

```markdown
# Project Name

## Build Commands
npm run dev      # Start dev server
npm run build    # Production build
npm test         # Run tests

## Architecture
SvelteKit app with Stripe payments and Firebase auth.

## Key Patterns
- All API routes use Zod validation
- Error responses follow RFC 7807 format

## Rules
- IMPORTANT: Always run lint before committing
- NEVER commit credentials or .env files
- For payment issues, read @docs/stripe.md first
```

See Tip 51 for a full battle-tested CLAUDE.md example.
